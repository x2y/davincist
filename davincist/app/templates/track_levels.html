{% extends "base_track.html" %}

{% load tags %}

{% block tab_title %}{{ track.name|capfirst }} levels{% endblock %}
{% block subtitle %}Levels{% endblock %}

{% block head %}
{{ block.super }}
<style>
  #nav #track-levels-link {
    color: #FAFAFA;
    border-color: #FAFAFA;
  }
</style>
{% endblock %}
{% block content %}
{% if user_track %}
  Your {{ track.name }} level, {{ user.username }}: {{ user_track.level.rank }}, {{ user_track.level.name }}.<br>
{% endif %}
<ul>
{% for level in track.levels.all %}
  <li>
    {% level_link level %}: {{ level.name }}.  {{ level.description|truncatechars:100 }}<br>
    <ul>
    {% for requirement in level.requirements.all %}
      <li>
        {% for badge in requirement.badges.all %}
          {% badge_link badge %}
          {% if not forloop.last %} or {% endif %}
        {% endfor %}
      </li>
    {% endfor %}
      <li>Top DaVincists at this level:
        {% for user_track in level.top_10_user_tracks|slice:":3" %}
          {% user_link user_track.user %} ({{ user_track.xp }})
          {% if not forloop.last %},{% endif %}
        {% empty %}
          No one has reached this level yet.
        {% endfor %}
      </li>
    </ul>
  </li>
{% endfor %}
</ul>
{% endblock %}
